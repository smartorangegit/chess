function showFlorPlan(){$(".entrance-flats").hover(function(){var t=$(this).offset().top,e=$(this).closest(".result-tile").offset().top,a=t-e-3,r=$(this).data();$(".floor-plan").css({top:a,display:"block"}),$(".floor-plan__link").attr("href",r)},function(){$(".floor-plan").css("display","none")}),$(".floor-plan").hover(function(){$(this).css("display","block")},function(){$(this).css("display","none")})}function changeFilterFloorNum(t){var e=$(".filter-top-range").find(".range__item")[2],a=$(e).find(".js-filter__text_min").html(),r=$(e).find(".js-filter__text_max").html();3!=t&&(filter.option.floor=[],filter.option.floor[0]=+a,filter.option.floor[1]=+r,filter.typ=3,$(e).css("display","flex"))}function tooltipShow(){$(".entrance-flats__item").hover(function(){var t=$(".result-tile-wrap").offset().top,e=$(".result-tile-wrap").offset().left,a=$(this).offset().top,r=$(this).offset().left,o=a-t,l=r-e,s=$(".entrance-tooltip"),i=s.height(),n=s.width();$(this).hasClass("entrance-flats__item_not_available")||(s.css({top:o-i-25,left:l-1.4*n,opacity:"1"}),$(".entrance-tooltip__num").html($(this).data("num")),$(".entrance-tooltip__price").html($(this).data("price")),$(".entrance-tooltip__square").html($(this).data("square")),$(".entrance-tooltip__price_meter").html($(this).data("price_m")),$(".entrance-tooltip__rooms").html($(this).data("rooms")),$(".entrance-tooltip__image").attr("src",$(this).data("image")))},function(){$(".entrance-tooltip").css({opacity:"0",left:"-999px"})})}function showFilterPagination(){for(var t,e=$(".filter-section-js"),a=0;a<e.length;a++)$(e[a]).hasClass("filter-section_active-js")&&(t=$(e).index(e[a]));1==t||3==t?$(".filter-pagination").css("display","none"):$(".filter-pagination").css("display","block")}function addNewOptionToFilter(t,e){t.option.properties[e]=getDefaulValue($("input[name='"+e+"']"))}function rangeMarkup(t,e,a,r,o){return"<div id='"+t+"' class='range__item'><span class='filter_name'>"+a+"</span ><div class='filter__ranges filter__ranges_ta'><input name='"+e+"' type='range' min='"+r+"' max='"+o+"' class='filter__hidden-values js-filter__hidden-values' style='display: none;'><input class='filter__range js-filter__range'  type='text'><span class='range__text range__text_min js-filter__text_min'></span><span class='range__text range__text_max js-filter__text_max'></span></div></div>"}function noResult(t){0==t.length?($(".no-result-wrap").css("display","block"),$(".pagination").css("display","none"),$(".filter-section-js").css({position:"absolute",opacity:"0"})):($(".no-result-wrap").css("display","none"),$(".filter-section-js").css({position:"relative",opacity:"1"}))}function getFlats(t){var e=[];for(var a in t){var r=t[a];e.push(r)}return e}function flatsShow(t){function e(t){switch(t.sale){case"1":return"<li class='result-plan-list__item'><a href='"+t.url+"' class='result-plan-list__image-link'><img src='"+t.img+"' alt='plan-image' class='result-plan-list__image'><div class='result-plan-info'><div class='result-plan-info__price'><p class='result-plan-info__text'>"+t.price+" грн</p><p class='result-plan-info__text'>"+t.all_room+"м<sup>2</sup> – "+t.price_m2+" грн/м<sup>2</sup></p><div class='color-box result-plan__color-box color-box_green'></div></div><div class='result-plan-info__floor'><p class='result-plan-info__text'>"+t.floor+" этаж</p><p class='result-plan-info__text'>№ "+t.number+"</p></div></div><span class='rooms__link result-plan__rooms'>"+t.rooms+"K</span><span class='button result-plan__button border-gradient'>Подробнее</span></a></li>";case"2":return"<li class='result-plan-list__item'><a href='"+t.url+"' class='result-plan-list__image-link'><img src='"+t.img+"' alt='plan-image' class='result-plan-list__image'><div class='result-plan-info'><div class='result-plan-info__price'><p class='result-plan-info__text'>Бронь</p><p class='result-plan-info__text'>"+t.all_room+"м<sup>2</sup></p><div class='color-box result-plan__color-box color-box_yellow'></div></div><div class='result-plan-info__floor'><p class='result-plan-info__text'>"+t.floor+" этаж</p><p class='result-plan-info__text'>№ "+t.number+"</p></div></div><span class='rooms__link result-plan__rooms'>"+t.rooms+"K</span><p class='result-plan-info__text result-plan-info__text_center'>Помещение недоступно для покупки</p></a></li>";case"3":return"<li class='result-plan-list__item'><a href='"+t.url+"' class='result-plan-list__image-link'><img src='"+t.img+"' alt='plan-image' class='result-plan-list__image'><div class='result-plan-info'><div class='result-plan-info__price'><p class='result-plan-info__text'>"+t.price+" грн</p><p class='result-plan-info__text'>"+t.all_room+"м<sup>2</sup> – "+t.price_m2+" грн/м<sup>2</sup></p><div class='color-box result-plan__color-box color-box_gray'></div></div><div class='result-plan-info__floor'><p class='result-plan-info__text'>"+t.floor+" этаж</p><p class='result-plan-info__text'>№ "+t.number+"</p></div></div><span class='rooms__link result-plan__rooms'>"+t.rooms+"K</span><span class='button result-plan__button border-gradient'>Подробнее</span></a></li>";case"0":default:return"<li class='result-plan-list__item'><a href='"+t.url+"' class='result-plan-list__image-link'><img src='"+t.img+"' alt='plan-image' class='result-plan-list__image'><div class='result-plan-info'><div class='result-plan-info__price'><p class='result-plan-info__text'>"+t.price+" грн</p><p class='result-plan-info__text'>"+t.all_room+"м<sup>2</sup> – "+t.price_m2+" грн/м<sup>2</sup></p><div class='color-box result-plan__color-box color-box_dark-gray'></div></div><div class='result-plan-info__floor'><p class='result-plan-info__text'>"+t.floor+" этаж</p><p class='result-plan-info__text'>№ "+t.number+"</p></div></div><span class='rooms__link result-plan__rooms'>"+t.rooms+"K</span><span class='button result-plan__button border-gradient'>Подробнее</span></a></li>"}}$(".result-plan-list__item").remove();var a=getFlats(t);return $(".result-plan-list").append(function(t){var a="";return t.forEach(function(t,r){a+=e(t)}),a}(a))}function flatsShowTable(t,e){function a(t){switch(t){case"1":return"<div class='color-box color-box_green filter-table__color-box'></div>";case"2":return"<div class='color-box color-box_yellow filter-table__color-box'></div>";case"3":return"<div class='color-box color-box_gray filter-table__color-box'></div>";case"0":return"<div class='color-box color-box_dark-gray filter-table__color-box'></div>";default:return"<div class='color-box filter-table__color-box'></div>"}}var r=getFlats(t);return $(".filter-table__head").append(function(t){$(".filter-table__heading").remove();var e="";return t.forEach(function(t,a){e+="<th data-sort='"+t[1]+"' class='filter-table__heading'>"+t[0]+"</th>"}),e}(e)),sendSortingData(),$(".filter-table__body").append(function(t,e){function r(t){for(var e in t.properties)t[e]=t.properties[e].property_flat;l.push(t)}$(".filter-table__row").remove();var o={},l=[],s="";return function(t){t.forEach(function(t){o[t[1]]=t[0]})}(e),t.forEach(r),l.forEach(function(t,e){var r="<tr onclick='location.href=&apos;http://apivime.smarto.com.ua"+t.url+"&apos;' class='filter-table__row'><td class='filter-table__col'>"+t.floor+"</td><td class='filter-table__col'>"+a(t.sale)+"</td><td class='filter-table__col'>"+t.life_room+"</td>";for(var l in o)"floor"!==l&&"sale"!==l&&"life_room"!==l&&(r+="<td class='filter-table__col'>"+(void 0!=t[l]?t[l]:"Нет значения")+"</td>");r+="</tr>",s+=r}),s}(r,e))}function sendSortingData(){$(".filter-table__heading").on("click",function(){$(this).toggleClass("filter-sort_top");var t=$(this).data("sort");filter.order=tableHeadingCklickCount%2==0?[t,"asc"]:[t,"desc"],tableHeadingCklickCount++,$.ajax({url:"http://apivime.smarto.com.ua/ajax",type:"POST",dataType:"json",data:filter,success:function(t){flatsShowTable(t.dataList,t.dataTable)},error:function(t){console.log(t)}})})}function entranceShow(t){function e(t){function e(e,a){switch(e.sale){case"1":return"<li class='"+a+"'data-image='"+t.img+"'data-square='"+t.all_room+"'data-price_m='"+t.price_m2+"'data-price='"+t.price+"'data-rooms='"+t.rooms+"'data-num='"+t.number+"'><a href='"+t.url+"' class='entrance-flats__color-box color-box_green'>"+t.rooms+"</a></li>";case"2":return"<li class='"+a+"'data-image='"+t.img+"'data-square='"+t.all_room+"'data-price_m='"+t.price_m2+"'data-price='"+t.price+"'data-rooms='"+t.rooms+"'data-num='"+t.number+"'><a href='"+t.url+"' class='entrance-flats__color-box color-box_yellow'>"+t.rooms+"</a></li>";case"3":return"<li class='"+a+"'data-image='"+t.img+"'data-square='"+t.all_room+"'data-price_m='"+t.price_m2+"'data-price='"+t.price+"'data-rooms='"+t.rooms+"'data-num='"+t.number+"'><a href='"+t.url+"' class='entrance-flats__color-box color-box_gray'>"+t.rooms+"</a></li>";case"0":return"<li class='"+a+"'data-image='"+t.img+"'data-square='"+t.all_room+"'data-price_m='"+t.price_m2+"'data-price='"+t.price+"'data-rooms='"+t.rooms+"'data-num='"+t.number+"'><a href='"+t.url+"' class='entrance-flats__color-box color-box_dark-gray'>"+t.rooms+"</a></li>";default:return"<li class='"+a+" entrance-flats__item_not_available'data-image='"+t.img+"'data-square='"+t.all_room+"'data-price_m='"+t.price_m2+"'data-price='"+t.price+"'data-rooms='"+t.rooms+"'data-num='"+t.number+"'><div class='entrance-flats__color-box color-box_gray'></div></li>"}}return 1==t.filter?e(t,"entrance-flats__item"):e(t,"entrance-flats__item entrance-flats__item_active")}function a(t){var e,a="";for(var o in t)a+="<div class='entrance'><p class='entrance__num'>"+o+"</p><div class='entrance-flats-wrap'>"+r(t[o]).floorMarkup+"</div></div>",e=r(t[o]).maxFloor;return{finalMarkup:a,maxFloor:e}}function r(t){var e="",a=0;for(var r in t)a++,e+="<ul class='entrance-flats'>"+o(t[r])+"</ul>";return{floorMarkup:e,maxFloor:a}}function o(t){var a="";for(var r in t)a+=e(t[r]);return a}$(".entrance").remove();var l=t.data;$(".entrance-wrap").append(a(l).finalMarkup),function(t,e){$(".entrance-floor__item").remove();for(var a=+e[0];a<=+e[1];a++)$(".entrance-floor").append("<li class='entrance-floor__item'>"+a+"</li>")}(a(l).maxFloor,t.setka),tooltipShow(),showFlorPlan()}function getParametersFromUrl(){var t=decodeURIComponent(window.location.href),e=t.match(new RegExp("property_","g"));if(null!=e){for(var a=e.length/2||[],r=new URL(t),o={price:r.searchParams.getAll("option[price][]"),all_room:r.searchParams.getAll("option[all_room][]"),rooms:r.searchParams.getAll("option[rooms][]"),floor:r.searchParams.getAll("option[floor][]")},l=0;l<a;l++){var s="property_"+(l+1);s=s.toString(),o[s]=r.searchParams.getAll("option[properties]["+s+"][]")}for(var i=$(".range__item"),n=i.find(".js-filter__hidden-values"),c=0;c<n.length;c++){var f=$(n[c]).attr("name");for(var p in o)if(f==p){var u=$(n[c]).siblings(".js-filter__range").data("ionRangeSlider");u.update({from:o[p][0],to:o[p][1]}),$(n[c]).siblings(".js-filter__text_min").html(o[p][0]),$(n[c]).siblings(".js-filter__text_max").html(o[p][1])}}for(var _=o.rooms,d=$(".filter-short .filter-checkbox"),g=0;g<d.length;g++)_.forEach(function(t,e){+t==g+1&&$(d[g]).attr("checked","checked")})}}function request(){$.ajax({url:"http://apivime.smarto.com.ua/ajax",type:"POST",dataType:"json",data:filter,success:function(t){planDraw(t)},error:function(t){console.log(t)}})}function planDraw(t){var e=getCoord(t),a=getParam(t),r=t.img[0],o=t.img[1];t.img[name];$(".svg-wrap").css({width:r+"px",height:o+"px"}),function(l){function s(t,e,r){var o=c[r].mid[0],l=c[r].mid[1];switch(e[r].sale){case"1":return"<g class='floor-svg__grup'><a href='http://apivime.smarto.com.ua"+e[r].url+"'><polygon id='"+e[r].id+"' class='floor-svg__polygon' points='"+t+"'/><g class='rect-wrap' data-active='"+e[r].active+"'><rect x='"+o+"' y='"+l+"' class='floor-svg__rect floor-svg__rect_green' width='20' height='20'/><text x='"+(o+7)+"' y='"+(l+14)+"' class='floor-svg__text floor-svg__text_white'>"+a[r].rooms+"</text></g><g class='rect-wrap' data-active='"+e[r].active+"'><rect x='"+(o+20)+"' y='"+l+"' class='floor-svg__rect floor-svg__rect_green_lighter' width='65' height='20'/><text x='"+(o+26)+"' y='"+(l+14)+"' class='floor-svg__text floor-svg__text_black'>"+a[r].square+" м<tspan class='sup'>2</tspan></text></g></a></g>";case"2":return"<g class='floor-svg__grup'><a href='http://apivime.smarto.com.ua"+e[r].url+"'><polygon id='"+e[r].id+"' class='floor-svg__polygon' points='"+t+"'/><g class='rect-wrap' data-active='"+e[r].active+"'><rect x='"+o+"' y='"+l+"' class='floor-svg__rect floor-svg__rect_yellow' width='20' height='20'/><text x='"+(o+7)+"' y='"+(l+14)+"' class='floor-svg__text floor-svg__text_white'>"+a[r].rooms+"</text></g><g class='rect-wrap' data-active='"+e[r].active+"'><rect x='"+(o+20)+"' y='"+l+"' class='floor-svg__rect floor-svg__rect_yellow_lighter' width='65' height='20'/><text x='"+(o+26)+"' y='"+(l+14)+"' class='floor-svg__text floor-svg__text_black'>"+a[r].square+" м<tspan class='sup'>2</tspan></text></g></a></g>";case"3":return"<g class='floor-svg__grup'><a href='http://apivime.smarto.com.ua"+e[r].url+"'><polygon id='"+e[r].id+"' class='floor-svg__polygon' points='"+t+"'/><g class='rect-wrap' data-active='"+e[r].active+"'><rect x='"+o+"' y='"+l+"' class='floor-svg__rect floor-svg__rect_gray' width='20' height='20'/><text x='"+(o+7)+"' y='"+(l+14)+"' class='floor-svg__text floor-svg__text_white'>"+a[r].rooms+"</text></g><g class='rect-wrap' data-active='"+e[r].active+"'><rect x='"+(o+20)+"' y='"+l+"' class='floor-svg__rect floor-svg__rect_gray_lighter' width='65' height='20'/><text x='"+(o+26)+"' y='"+(l+14)+"' class='floor-svg__text floor-svg__text_black'>"+a[r].square+" м<tspan class='sup'>2</tspan></text></g></a></g>";case"0":return"<g class='floor-svg__grup'><a href='http://apivime.smarto.com.ua"+e[r].url+"'><polygon id='"+e[r].id+"' class='floor-svg__polygon' points='"+t+"'/><g class='rect-wrap' data-active='"+e[r].active+"'><rect x='"+o+"' y='"+l+"' class='floor-svg__rect floor-svg__rect_dark-gray' width='20' height='20'/><text x='"+(o+7)+"' y='"+(l+14)+"' class='floor-svg__text floor-svg__text_white'>"+a[r].rooms+"</text></g><g class='rect-wrap' data-active='"+e[r].active+"'><rect x='"+(o+20)+"' y='"+l+"' class='floor-svg__rect floor-svg__rect_dark-gray_lighter' width='65' height='20'/><text x='"+(o+26)+"' y='"+(l+14)+"' class='floor-svg__text floor-svg__text_black'>"+a[r].square+" м<tspan class='sup'>2</tspan></text></g></a></g>";default:return"<g class='floor-svg__grup'><a href='http://apivime.smarto.com.ua"+e[r].url+"'><polygon id='"+e[r].id+"' class='floor-svg__polygon' points='"+t+"'/><g class='rect-wrap' data-active='"+e[r].active+"'><rect x='"+o+"' y='"+l+"' class='floor-svg__rect floor-svg__rect_dark-gray' width='20' height='20'/><text x='"+(o+7)+"' y='"+(l+14)+"' class='floor-svg__text floor-svg__text_white'>"+a[r].rooms+"</text></g><g class='rect-wrap' data-active='"+e[r].active+"'><rect x='"+(o+20)+"' y='"+l+"' class='floor-svg__rect floor-svg__rect_dark-gray_lighter' width='65' height='20'/><text x='"+(o+26)+"' y='"+(l+14)+"' class='floor-svg__text'>"+a[r].square+" м<tspan class='sup'>2</tspan></text></g></a></g>"}}var i=$(".svg-wrap"),n="",c=getPolygonsCenter(e);$(".floor-svg")&&$(".floor-svg").remove(),e.forEach(function(t,e){n+=s(t,a,e)});var f="<svg class='floor-svg' width='"+r+"' height='"+o+"' version='1.0' xmlns='http://www.w3.org/2000/svg'><image xlink:href='"+t.img.name+"' x='0' y='0' height='100%' width='100%' />"+n+"</svg>";i.append(f),polygonHover(a),activeFlat(),zooming()}()}function activeFlat(){for(var t=$(".rect-wrap"),e=0;e<t.length;e++){0==$(t[e]).attr("data-active")?$(t[e]).css({opacity:"0.7",transform:"scale(0.95)"}):$(t[e]).css({opacity:"1",transform:"scale(1)"})}}function getCoord(t){var e=t.dataList,a=[];return e.forEach(function(t,e){null!=t.sorts&&a.push(t.sorts)}),a}function getParam(t){var e=t.dataList,a=[];return e.forEach(function(t,e){var r={};null!=t.sorts&&(r.rooms=t.rooms,r.square=t.all_room,r.sale=t.sale,r.id=t.id,r.totalPrice=t.price,r.meterPrice=t.price_m2,r.url=t.url,r.active=t.filter,a.push(r))}),a}function getPolygonsCenter(t){var e=[];return t=t.map(function(t){return t.split(",")}),t.forEach(function(t){t=t.map(function(t){return t=+t}),e.push(t)}),function(t){var e=[];return t.forEach(function(t){for(var a={},r=[],o=[],l=0;l<t.length;l++)l%2==0?r.push(t[l]):o.push(t[l]);var s=[],i=Math.max.apply(Math,r),n=Math.max.apply(Math,o);s.push(i),s.push(n);var c=[],f=Math.min.apply(Math,r),p=Math.min.apply(Math,o);c.push(f),c.push(p);var u=[],_=i-(i-f)/2-10,d=n-(n-p)/2-10;u.push(_),u.push(d),a.min=c,a.max=s,a.mid=u,e.push(a)}),e}(t)}function polygonHover(t){function e(e){var a=$(e).attr("id"),r="";$(".flat-tooltip_big").remove(),t.forEach(function(t){var e=t.sale;if(a==t.id)switch(e){case"1":return r="<div class='flat-tooltip_big'><div class='flat-tooltip-num'><div class='flat-tooltip-num__rooms flat-tooltip-num__rooms_green'>"+t.rooms+"K</div><div class='flat-tooltip-num__num'>№"+t.id+"</div></div><div class='flat-tooltip-price'><p class='flat-tooltip-price__text'>"+t.totalPrice+" грн.</p><p class='flat-tooltip-price__text flat-tooltip-price__text_lower'>"+t.square+" м<sup>2</sup> – <span class='flat-tooltip-price__text_gray'>"+t.meterPrice+" грн/м<sup>2</sup></span></p></div></div>";case"2":return r="<div class='flat-tooltip_big'><div class='flat-tooltip-num'><div class='flat-tooltip-num__rooms flat-tooltip-num__rooms_yellow'>"+t.rooms+"K</div><div class='flat-tooltip-num__num'>№"+t.id+"</div></div><div class='flat-tooltip-price'><p class='flat-tooltip-price__text'>Бронь";case"0":return r="<div class='flat-tooltip_big'><div class='flat-tooltip-num'><div class='flat-tooltip-num__rooms flat-tooltip-num__rooms_dark-gray'>"+t.rooms+"K</div><div class='flat-tooltip-num__num'>№"+t.id+"</div></div><div class='flat-tooltip-price'><p class='flat-tooltip-price__text'>Продано</p><p class='flat-tooltip-price__text flat-tooltip-price__text_lower'>"+t.square+" м<sup>2</sup></p></div></div>";case"3":default:return r="<div class='flat-tooltip_big'><p>Помещение недоступно</p></div>"}}),$(".svg-wrap").append(r)}function a(e){var a=e.getBoundingClientRect().left,r=e.getBoundingClientRect().top,o=document.getElementsByClassName("plan-wrap")[0],l=o.getBoundingClientRect().left,s=o.getBoundingClientRect().top,i=r-s,n=a-l,c=$(".flat-tooltip_big"),f=c.height(),p=c.width();c.css({top:i-.3*f+"px",left:n+.3*p+"px",opacity:"1"}),c.hover(function(t){$(this).css({top:i-.3*f+"px",left:n+.3*p+"px",opacity:"1"})},function(){$(this).css({left:"-9999",opacity:"0"})}),$(e).siblings().css("display","none"),function(){var a=$(e).attr("id");t.forEach(function(t){var r=t.sale;if(a==t.id)switch(r){case"1":return $(e).css("fill","#219277");case"2":return $(e).css("fill","#FFB142");case"3":return $(e).css("fill","#666665");case"0":default:return $(e).css("fill","#454C53")}})}()}function r(t){$(t).siblings().css("display","block"),$(".flat-tooltip_big").css({opacity:"0",left:"-999px"}),$(t).css("fill","transparent")}$(".floor-svg__polygon").hover(function(t){var r=this;e(r),a(r)},function(t){r(this)})}function zooming(){var t=1;$(".zoom-button__button_plus").on("click",function(){t<1.8&&(t+=.2),$(".floor-svg").css("transform","translate(-50%, -50%) scale("+t+")"),imageDrag(t)}),$(".zoom-button__button_minus").on("click",function(){t>1&&(t-=.2),$(".floor-svg").css("transform","translate(-50%, -50%) scale("+t+")"),imageDrag(t)}),function(){document.getElementsByClassName("plan-wrap")[0].addEventListener("wheel",function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var a=e.deltaY||e.detail||e.wheelDelta;a<0?t<2&&(t+=-a/3e3):a>1&&t>1&&(t+=-a/3e3),$(".floor-svg").css("transform","translate(-50%, -50%) scale("+t+")"),imageDrag(t)})}(),imageDrag(1)}function imageDrag(t){var e=document.getElementsByClassName("floor-svg")[0],a=document.getElementsByClassName("plan-wrap")[0],r=document.getElementsByClassName("floor-wrap")[0];r.onmousedown=function(r){var o=a.getBoundingClientRect(),l=e.getBoundingClientRect(),s=r.clientX-o.left,i=r.clientY-o.top,n=l.top-o.top-i,c=l.left-o.left-s;$(a).mousemove(function(a){var r=a.clientX-o.left+150,l=a.clientY-o.top+150,s=r+c,i=l+n;$(".floor-container").css({cursor:"-webkit-grab",cursor:"-moz-grab",cursor:"grab"}),t<1.5?$(e).css({left:s+10*t+"px",top:i+10*t+"px"}):$(e).css({left:s+100+"px",top:i+100+"px"})})},r.ondragstart=function(){return!1},r.onmouseup=function(){$(a).off("mousemove"),$(".floor-container").css({cursor:"default"})}}$(".filter-top__button_more").on("click",function(){$(this).toggleClass("filter-top__button_more_active"),$(this).find(".filter-top__button-icon").toggleClass("filter-top__button-icon_active"),$(".filter-full").slideToggle(),$(".filter-settings").slideUp()}),$(".filter-full__button_more").on("click",function(){$(this).toggleClass("filter-full__button_more_active"),$(this).find(".filter-full__button-icon").toggleClass("filter-full__button-icon_active"),$(".filter-settings").slideToggle()}),document.querySelectorAll(".color-box").forEach(function(t){var e=t.getAttribute("data-color");"green"==e?$(t).addClass("color-box_green"):"yellow"==e?$(t).addClass("color-box_yellow"):"gray"==e?$(t).addClass("color-box_gray"):"dark-gray"==e&&$(t).addClass("color-box_dark-gray")}),showFlorPlan(),$(".result-short__select").on("click",function(){$(this).siblings(".view-list").slideToggle()}),$(".view-list__item").on("click",function(){var t=$(this).find(".view-list__text").html(),e="#"+$(this).find(".view-list__icon").attr("id"),a=$(this).closest(".result-short__select-wrap").find(".result-short__select-icon"),r=$(this).closest(".result-short__select-wrap").find(".result-short__select"),o=$(".filter-section-js"),l=$(this).index();r.html(t),a.find("use").attr("xlink:href",e),$(this).closest(".view-list").css("display","none"),o.css("display","none"),$(o[l]).fadeIn(),o.removeClass("filter-section_active-js"),$(o[l]).addClass("filter-section_active-js"),0==l||2==l?$(".filter-select").css("display","block"):$(".filter-select").css("display","none"),showFilterPagination(),changeFilterFloorNum(l)}),tooltipShow(),$(".result-tile-wrap").addClass("filter-section_active-js");var filterDefautl={count:"12",typ:"3",page:"1",order:[],option:{price:getDefaulValue($("input[name='price']")),all_room:getDefaulValue($("input[name='all_room']")),rooms:[],floor:getDefaulValue($("input[name='floor']")),house:$(".building").data("house"),project_id:$(".building").data("id"),properties:{}}};!function(){var t=$(".filter-settings").find(".filter-checkbox");$(".filter-full-range").find(".range__item").remove(),t.each(function(t,e){var a=$(e).prop("checked"),r=$(e).data("label"),o=r.split(" ").join(""),l=$(e).attr("id"),s=$(e).data("min"),i=$(e).data("max");rangeMarkup(o,r,s,i);a&&$(".filter-full-range").append(rangeMarkup(o,l,r,s,i)),addNewOptionToFilter(filterDefautl,l),rangesValue()})}(),$(".filter-settings-list__label").on("click",function(){var t=$(this).siblings(".filter-checkbox"),e=t.prop("checked"),a=t.data("label"),r=a.split(" ").join(""),o=t.attr("id"),l=t.data("min"),s=t.data("max");e?($("#"+r).remove(),filter.option.properties[o][0]=null,filter.option.properties[o][1]=null):($(".filter-full-range").append(rangeMarkup(r,o,a,l,s)),addNewOptionToFilter(filter,o),rangesValue())}),$(".clear-select-js").on("click",function(){$(".filter-full-range").find(".range__item").remove(),filter.option.properties={}});var filter=objClone(filterDefautl);!function(){for(var t=filter.option.rooms,e=$(".filter-short-checkbox-wrap").find(".filter-checkbox"),a=0;a<e.length;a++)$(e[a]).prop("checked")&&t.push($(e[a]).attr("value"))}(),rangesValue(),getRoomsNumber(),$(".filter__button-js").on("click",function(t){t.preventDefault(),$(".residence-list__item").remove();var e=$.param(filter),a=window.location.href+"?";a=a.substr(0,a.indexOf("?")),window.history.pushState("","",a+"?"+e),getParametersFromUrl(),$.ajax({url:"http://apivime.smarto.com.ua/ajax",type:"POST",dataType:"json",data:filter,success:function(t){entranceShow(t),flatsShow(t.dataList),flatsShowTable(t.dataList,t.dataTable),showFilterPagination(),paginationItemShow(t.quantity,12,flatsShow,flatsShowTable),$(".result-short_all-js").html(t.quantity),$(".result-short_free-js").html(t.quantityFree),noResult(t.dataList)},error:function(t){console.log(t)}})}),function(){$(".select__item").on("click",function(t){var e=$(this).closest(".home-filter__select-wrap"),a=e.find(".result-list-top__select").val();filter.count=a,$.ajax({url:"http://apivime.smarto.com.ua/ajax",type:"POST",dataType:"json",data:filter,success:function(t){flatsShow(t.dataList),flatsShowTable(t.dataList,t.dataTable),paginationItemShow(t.quantity,a,flatsShow,flatsShowTable)},error:function(t){console.log(t)}})})}();var tableHeadingCklickCount=1;sendSortingData();var URLSearchParams=URLSearchParams||function(){"use strict";function t(t){var o,s,i,n,c,f,u=Object.create(null);if(this[p]=u,t)if("string"==typeof t)for("?"===t.charAt(0)&&(t=t.slice(1)),n=t.split("&"),c=0,f=n.length;c<f;c++)i=n[c],o=i.indexOf("="),-1<o?a(u,r(i.slice(0,o)),r(i.slice(o+1))):i.length&&a(u,r(i),"");else if(l(t))for(c=0,f=t.length;c<f;c++)i=t[c],a(u,i[0],i[1]);else if(t.forEach)t.forEach(e,u);else for(s in t)a(u,s,t[s])}function e(t,e){a(this,e,t)}function a(t,e,a){var r=l(a)?a.join(","):a;e in t?t[e].push(r):t[e]=[r]}function r(t){return decodeURIComponent(t.replace(n," "))}function o(t){return encodeURIComponent(t).replace(i,f)}var l=Array.isArray,s=t.prototype,i=/[!'\(\)~]|%20|%00/g,n=/\+/g,c={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},f=function(t){return c[t]},p="__URLSearchParams__:"+Math.random();s.append=function(t,e){a(this[p],t,e)},s.delete=function(t){delete this[p][t]},s.get=function(t){var e=this[p];return t in e?e[t][0]:null},s.getAll=function(t){var e=this[p];return t in e?e[t].slice(0):[]},s.has=function(t){return t in this[p]},s.set=function(t,e){this[p][t]=[""+e]},s.forEach=function(t,e){var a=this[p];Object.getOwnPropertyNames(a).forEach(function(r){a[r].forEach(function(a){t.call(e,a,r,this)},this)},this)},s.toJSON=function(){return{}},s.toString=function(){var t,e,a,r,l=this[p],s=[];for(e in l)for(a=o(e),t=0,r=l[e];t<r.length;t++)s.push(a+"="+o(r[t]));return s.join("&")};var u=Object.defineProperty,_=Object.getOwnPropertyDescriptor,d=function(t){function e(e,a){s.append.call(this,e,a),e=this.toString(),t.set.call(this._usp,e?"?"+e:"")}function a(e){s.delete.call(this,e),e=this.toString(),t.set.call(this._usp,e?"?"+e:"")}function r(e,a){s.set.call(this,e,a),e=this.toString(),t.set.call(this._usp,e?"?"+e:"")}return function(t,o){return t.append=e,t.delete=a,t.set=r,u(t,"_usp",{configurable:!0,writable:!0,value:o})}},g=function(t){return function(e,a){return u(e,"_searchParams",{configurable:!0,writable:!0,value:t(a,e)}),a}},m=function(e){var a=e.append;e.append=s.append,t.call(e,e._usp.search.slice(1)),e.append=a},h=function(t,e){if(!(t instanceof e))throw new TypeError("'searchParams' accessed on an object that does not implement interface "+e.name)},v=function(e){var a,r=e.prototype,o=_(r,"searchParams"),l=_(r,"href"),s=_(r,"search");!o&&s&&s.set&&(a=g(d(s)),Object.defineProperties(r,{href:{get:function(){return l.get.call(this)},set:function(t){var e=this._searchParams;l.set.call(this,t),e&&m(e)}},search:{get:function(){return s.get.call(this)},set:function(t){var e=this._searchParams;s.set.call(this,t),e&&m(e)}},searchParams:{get:function(){return h(this,e),this._searchParams||a(this,new t(this.search.slice(1)))},set:function(t){h(this,e),a(this,t)}}}))};return v(HTMLAnchorElement),/^function|object$/.test(typeof URL)&&URL.prototype&&v(URL),t}();!function(t){var e=function(){try{return!!Symbol.iterator}catch(t){return!1}}();"forEach"in t||(t.forEach=function(t,e){var a=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach(function(r){!r.length||r in a||(a[r]=this.getAll(r)).forEach(function(a){t.call(e,a,r,this)},this)},this)}),"keys"in t||(t.keys=function(){var t=[];this.forEach(function(e,a){t.push(a)});var a={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e&&(a[Symbol.iterator]=function(){return a}),a}),"values"in t||(t.values=function(){var t=[];this.forEach(function(e){t.push(e)});var a={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e&&(a[Symbol.iterator]=function(){return a}),a}),"entries"in t||(t.entries=function(){var t=[];this.forEach(function(e,a){t.push([a,e])});var a={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e&&(a[Symbol.iterator]=function(){return a}),a}),!e||Symbol.iterator in t||(t[Symbol.iterator]=t.entries),"sort"in t||(t.sort=function(){for(var t,e,a,r=this.entries(),o=r.next(),l=o.done,s=[],i=Object.create(null);!l;)a=o.value,e=a[0],s.push(e),e in i||(i[e]=[]),i[e].push(a[1]),o=r.next(),l=o.done;for(s.sort(),t=0;t<s.length;t++)this.delete(s[t]);for(t=0;t<s.length;t++)e=s[t],this.append(e,i[e].shift())})}(URLSearchParams.prototype),getParametersFromUrl(),$(".plan-data-js").on("click",function(){var t=$(".filter-top-range").find(".range__item")[2],e=$(t).find(".js-filter__text_min").html();filter.typ=4,filter.option.floor=e,request(),changeFilterFloorNum(1),$(t).css("display","none")}),$(".floor-nav-list__item").on("click",function(t){var e=$(this).html(),a=$(this);a.siblings().removeClass("floor-nav-list__item_active"),a.addClass("floor-nav-list__item_active"),filter.option.floor=e,$(".floor-svg").remove(),filter.typ="4",request(),changeFilterFloorNum(1)});