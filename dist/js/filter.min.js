function ranges(){for(var t=$(".range__item"),e=0;e<t.length;e++){var s=$(t[e]).find(".js-filter__hidden-values"),i=$(t[e]).find(".js-filter__range"),l=s.attr("min"),n=s.attr("max");s.siblings(".js-filter__text_min").html(l),s.siblings(".js-filter__text_max").html(n),i.ionRangeSlider({min:l,max:n,type:"double",prettify:!0,onChange:onRangeChange})}}function onRangeChange(t){for(var e=t.input,s=0;s<e.length;s++){e.siblings(".js-filter__text_min").html(t.from),e.siblings(".js-filter__text_max").html(t.to);var i=e.siblings(".js-filter__hidden-values").attr("name");filter.option[i][0]=+t.from,filter.option[i][1]=+t.to}}function citySelect(){var t=document.getElementById("city").value;filter.option.city=t}function districtSelect(){var t=document.getElementById("district").value;filter.option.district=t}function stateSelect(){var t=document.getElementById("state").value;filter.option.state=t}function developerSelect(){var t=document.getElementById("developer").value;filter.option.developer=t,console.log(filter)}function residenceShow(t){$(".residence-list").append(function(t){var e="";return t.forEach(function(t,s){e+="<li class='residence-list__item'><a href='residence.php'><h4 class='residence-list__heading'>"+t.project_name+"</h4><p class='residence-list__link'>"+t.project_site+"</p><div class='residence-list__image-wrap'><img src='"+t.project_img+"' alt='image' class='residence-list__image'><span class='residence-list__price'>от "+t.project_price+"грн. м<sup>2</sup></span></div><ul class='residence-list-info'><li class='residence-list-info__item'><svg class='residence-list-info__icon'><use xlink:href='#placeholder'></use></svg><p class='residence-list-info__text'>"+t.project_metro+"<br><span class='residence-list-info__text_medium'>"+t.project_adress+"</span></p></li><li class='residence-list-info__item'><svg class='residence-list-info__icon'><use xlink:href='#price'></use></svg><p class='residence-list-info__text'>Минимальная стоимость квартиры – <span class='residence-list-info__text_medium'>от "+t.project_price_flat+"грн.</span></p></li><li class='residence-list-info__item'><svg class='residence-list-info__icon residence-list-info__icon_rotate'><use xlink:href='#print'></use></svg><p class='residence-list-info__text'>Помещений – <span class='residence-list-info__text_medium'>"+t.project_rooms+"</span></p></li><li class='residence-list-info__logo-wrap'><img src='"+t.development_img+"' alt='logo' class='residence-list-info__logo'></li></ul></a></li>"}),e}(t))}function flatsShow(t){$(".result-plan-list").append(function(t){var e="";return t.forEach(function(t,s){e+="<li class='result-plan-list__item'><img src='img/filter/plan/plan_1.png' alt='plan-image' class='result-plan-list__image'><div class='result-plan-info'><div class='result-plan-info__price'><p class='result-plan-info__text'>"+t.common_cost+" грн</p><p class='result-plan-info__text'>"+t.meters+"м<sup>2</sup> – "+t.meter_cost+" грн/м<sup>2</sup></p><div class='color-box result-plan__color-box color-box_"+t.status+"'></div></div><div class='result-plan-info__floor'><p class='result-plan-info__text'>"+t.floor+" этаж</p><p class='result-plan-info__text'>№ "+t.flat_num+"</p></div></div><a href='#' class='rooms__link result-plan__rooms-link'>"+t.rooms_num+"K</a><a href='#' class='button result-plan__button'>Подробнее</a></li>"}),e}(t))}function paginationItemShow(t){var e=Math.floor(t/12),s=$(".pagination-num-list");t/12>1&&$(".home-pagination").css("display","block");for(var i=0;i<=e;i++)s.append("<li class='pagination-num-list__item'><a href='#' class='pagination-num-list__link pagination__button'>"+(i+1)+"</a></li>")}$(".filter-top__button_more").on("click",function(){$(this).toggleClass("filter-top__button_more_active"),$(this).find(".filter-top__button-icon").toggleClass("filter-top__button-icon_active"),$(".filter-full").slideToggle(),$(".filter-settings").slideUp()}),$(".filter-full__button_more").on("click",function(){$(this).toggleClass("filter-full__button_more_active"),$(this).find(".filter-full__button-icon").toggleClass("filter-full__button-icon_active"),$(".filter-settings").slideToggle()}),document.querySelectorAll(".color-box").forEach(function(t){var e=t.getAttribute("data-color");"green"==e?$(t).addClass("color-box_green"):"yellow"==e?$(t).addClass("color-box_yellow"):"gray"==e?$(t).addClass("color-box_gray"):"dark-gray"==e&&$(t).addClass("color-box_dark-gray")}),function(){function t(t){switch(t.status){case 0:return"<li class='entrance-flats__item'><div class='entrance-flats__color-box color-box_green'>"+t.rooms+"</div></li>";case 1:return"<li class='entrance-flats__item'><div class='entrance-flats__color-box color-box_yellow'>"+t.rooms+"</div></li>";case 2:return"<li class='entrance-flats__item'><div class='entrance-flats__color-box color-box_gray'>"+t.rooms+"</div></li>";case 3:return"<li class='entrance-flats__item'><div class='entrance-flats__color-box color-box_dark-gray'>"+t.rooms+"</div></li>";default:return}}function e(t){return t.reduce(function(t,e){return Math.max(t,e)})}function s(t){var s="",l=[];t.forEach(function(t,e){s+="<div class='entrance'><p class='entrance__num'>"+(e+1)+"</p><div class='entrance-flats-wrap'>"+i(t)+"</div></div>",l.push(t.length)});var n=e(l);return{finalMarkup:s,maxFloor:n}}function i(t){var e="";return t.forEach(function(t,s){e+="<ul data-link='dfvb' class='entrance-flats'>"+l(t)+"</ul>"}),e}function l(e){var s="";return e.forEach(function(e){s+=t(e)}),s}var n=[[[{status:0,rooms:3},{status:1,rooms:3},{status:2,rooms:3}],[{status:0,rooms:3},{status:1,rooms:3},{status:2,rooms:3}],[{status:0,rooms:3},{status:1,rooms:3},{status:2,rooms:3}],[{status:0,rooms:3},{status:1,rooms:3},{status:2,rooms:3}]],[[{status:0,rooms:3},{status:1,rooms:3},{status:2,rooms:3}],[{status:0,rooms:3},{status:1,rooms:3},{status:2,rooms:3}],[{status:0,rooms:1},{status:1,rooms:2},{status:3,rooms:3}]]];$(".entrance-wrap").append(s(n).finalMarkup),function(t){for(var e=0;e<t;e++)$(".entrance-floor").append("<li class='entrance-floor__item'>"+(e+1)+"</li>")}(s(n).maxFloor)}(),$(".entrance-flats").hover(function(){var t=$(this).offset().top,e=$(this).closest(".result-tile").offset().top,s=t-e-3,i=$(this).data();$(".floor-plan").css({top:s,display:"block"}),$(".floor-plan__link").attr("href",i)},function(){$(".floor-plan").css("display","none")}),$(".floor-plan").hover(function(){$(this).css("display","block")},function(){$(this).css("display","none")}),$(".result-short__select").on("click",function(){$(this).siblings(".view-list").slideToggle()}),$(".view-list__item").on("click",function(){var t=$(this).find(".view-list__text").html(),e="#"+$(this).find(".view-list__icon").attr("id"),s=$(this).closest(".result-short__select-wrap").find(".result-short__select-icon");$(this).closest(".result-short__select-wrap").find(".result-short__select").html(t),s.find("use").attr("xlink:href",e),$(this).closest(".view-list").css("display","none");var i=$(this).index();0===i?($(".result-plan").fadeIn(),$(".result-tile-wrap").css("display","none"),$(".result-list").css("display","none")):2===i?($(".result-tile-wrap").fadeIn(),$(".result-list").css("display","none"),$(".result-plan").css("display","none")):1===i&&($(".result-list").fadeIn(),$(".result-tile-wrap").css("display","none"),$(".result-plan").css("display","none"))}),$(".entrance-flats__item").hover(function(){var t=$(".result-tile-wrap").offset().top,e=$(".result-tile-wrap").offset().left,s=$(this).offset().top,i=$(this).offset().left,l=s-t,n=i-e,o=$(".entrance-tooltip"),a=o.height(),r=o.width();o.css({top:l-a-25,left:n-2*r-25,opacity:"1"})},function(){$(".entrance-tooltip").css({opacity:"0",left:"-999px"})});var filter={count:"12",typ:"1",page:"1",option:{price:[0,1e6],all_room:[0,2e4],rooms:[]}},myJSON={};ranges(),$(".filter-checkbox").on("click",function(){var t=$(this).attr("value");filter.option.rooms.push(+t)});var paginAjaxObj={url:"/ajax",type:"POST",dataType:"json",data:myJSON,success:function(){console.log("success")},error:function(){alert("Error")}};$(".pagination-num-list__link").on("click",function(t){t.preventDefault();var e=$(this).html();filter.page=e,myJSON=JSON.stringify(filter),$.ajax(paginAjaxObj)}),$(".pagination-next").on("click",function(t){t.preventDefault(),filter.page=+filter.page+1,myJSON=JSON.stringify(filter),$.ajax(paginAjaxObj)}),$(".pagination-prev").on("click",function(t){t.preventDefault(),+filter.page>=2&&(filter.page=+filter.page-1),myJSON=JSON.stringify(filter),$.ajax(paginAjaxObj)}),$(".filter__form").submit(function(t){t.preventDefault(),$(".residence-list__item").remove(),console.log(filter),$.ajax({url:"http://apivime.smarto.com.ua/ajax",type:"POST",dataType:"json",data:filter,success:function(t){console.log(t),residenceShow(t.data),paginationItemShow(t.quantity)},error:function(t){console.log(t)}})}),$(".filter-full__button_apply").on("click",function(t){t.preventDefault(),console.log(filter),myJSON=JSON.stringify(filter),$.ajax({url:"http://apivime.smarto.com.ua/ajax",type:"POST",dataType:"json",data:myJSON,success:function(t){flatsShow(t)},error:function(t){console.log(t)}})}),$(".filter__button_clear-js").on("click",function(){for(var t=$(".range__item"),e=0;e<t.length;e++){var s=$(t[e]).find(".js-filter__hidden-values").attr("min"),i=$(t[e]).find(".js-filter__hidden-values").attr("max");$(t[e]).find(".js-filter__text_min").html(s),$(t[e]).find(".js-filter__text_max").html(i),$(t[e]).find(".irs-bar").css({width:"100%",left:"0"}),$(t[e]).find(".from").css("left","0"),$(t[e]).find(".to").css("left","100%")}$(".filter-checkbox").prop("checked",!1)});