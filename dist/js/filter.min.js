function showFlorPlan(){$(".entrance-flats").hover(function(){var t=$(this).offset().top,e=$(this).closest(".result-tile").offset().top,o=t-e-3,a=$(this).data();$(".floor-plan").css({top:o,display:"block"}),$(".floor-plan__link").attr("href",a)},function(){$(".floor-plan").css("display","none")}),$(".floor-plan").hover(function(){$(this).css("display","block")},function(){$(this).css("display","none")})}function changeFilterFloorNum(t){var e=$(".filter-top-range").find(".range__item")[2],o=$(e).find(".js-filter__text_min").html(),a=$(e).find(".js-filter__text_max").html();3!=t&&(filter.option.floor=[],filter.option.floor[0]=+o,filter.option.floor[1]=+a,filter.typ=3,$(e).css("display","flex"))}function tooltipShow(){$(".entrance-flats__item").hover(function(){var t=$(".result-tile-wrap").offset().top,e=$(".result-tile-wrap").offset().left,o=$(this).offset().top,a=$(this).offset().left,r=o-t,l=a-e,s=$(".entrance-tooltip"),i=s.height(),n=s.width();$(this).hasClass("entrance-flats__item_not_available")||(s.css({top:r-i-25,left:l-1.4*n,opacity:"1"}),$(".entrance-tooltip__num").html($(this).data("num")),$(".entrance-tooltip__price").html($(this).data("price")),$(".entrance-tooltip__square").html($(this).data("square")),$(".entrance-tooltip__price_meter").html($(this).data("price_m")),$(".entrance-tooltip__rooms").html($(this).data("rooms")),$(".entrance-tooltip__image").attr("src",$(this).data("image")))},function(){$(".entrance-tooltip").css({opacity:"0",left:"-999px"})})}function showFilterPagination(){for(var t,e=$(".filter-section-js"),o=0;o<e.length;o++)$(e[o]).hasClass("filter-section_active-js")&&(t=$(e).index(e[o]));1==t||3==t?$(".filter-pagination").css("display","none"):$(".filter-pagination").css("display","block")}function addNewOptionToFilter(t,e){t.option.properties[e]=getDefaulValue($("input[name='"+e+"']"))}function rangeMarkup(t,e,o,a,r){return"<div id='"+t+"' class='range__item'><span class='filter_name'>"+o+"</span ><div class='filter__ranges filter__ranges_ta'><input name='"+e+"' type='range' min='"+a+"' max='"+r+"' class='filter__hidden-values js-filter__hidden-values' style='display: none;'><input class='filter__range js-filter__range'  type='text'><span class='range__text range__text_min js-filter__text_min'></span><span class='range__text range__text_max js-filter__text_max'></span></div></div>"}function noResult(t){0==t.length?($(".no-result-wrap").css("display","block"),$(".pagination").css("display","none"),$(".filter-section-js").css({position:"absolute",opacity:"0"})):($(".no-result-wrap").css("display","none"),$(".filter-section-js").css({position:"relative",opacity:"1"}))}function getFlats(t){var e=[];for(var o in t){var a=t[o];e.push(a)}return e}function flatsShow(t){function e(t){switch(t.sale){case"1":return"<li class='result-plan-list__item'><a href='"+t.url+"' class='result-plan-list__image-link'><img src='"+t.img+"' alt='plan-image' class='result-plan-list__image'><div class='result-plan-info'><div class='result-plan-info__price'><p class='result-plan-info__text'>"+t.price+" грн</p><p class='result-plan-info__text'>"+t.all_room+"м<sup>2</sup> – "+t.price_m2+" грн/м<sup>2</sup></p><div class='color-box result-plan__color-box color-box_green'></div></div><div class='result-plan-info__floor'><p class='result-plan-info__text'>"+t.floor+" этаж</p><p class='result-plan-info__text'>№ "+t.number+"</p></div></div><span class='rooms__link result-plan__rooms'>"+t.rooms+"K</span><span class='button result-plan__button border-gradient'>Подробнее</span></a></li>";case"2":return"<li class='result-plan-list__item'><a href='"+t.url+"' class='result-plan-list__image-link'><img src='"+t.img+"' alt='plan-image' class='result-plan-list__image'><div class='result-plan-info'><div class='result-plan-info__price'><p class='result-plan-info__text'>Бронь</p><p class='result-plan-info__text'>"+t.all_room+"м<sup>2</sup></p><div class='color-box result-plan__color-box color-box_yellow'></div></div><div class='result-plan-info__floor'><p class='result-plan-info__text'>"+t.floor+" этаж</p><p class='result-plan-info__text'>№ "+t.number+"</p></div></div><span class='rooms__link result-plan__rooms'>"+t.rooms+"K</span><p class='result-plan-info__text result-plan-info__text_center'>Помещение недоступно для покупки</p></a></li>";case"3":return"<li class='result-plan-list__item'><a href='"+t.url+"' class='result-plan-list__image-link'><img src='"+t.img+"' alt='plan-image' class='result-plan-list__image'><div class='result-plan-info'><div class='result-plan-info__price'><p class='result-plan-info__text'>"+t.price+" грн</p><p class='result-plan-info__text'>"+t.all_room+"м<sup>2</sup> – "+t.price_m2+" грн/м<sup>2</sup></p><div class='color-box result-plan__color-box color-box_gray'></div></div><div class='result-plan-info__floor'><p class='result-plan-info__text'>"+t.floor+" этаж</p><p class='result-plan-info__text'>№ "+t.number+"</p></div></div><span class='rooms__link result-plan__rooms'>"+t.rooms+"K</span><span class='button result-plan__button border-gradient'>Подробнее</span></a></li>";case"0":default:return"<li class='result-plan-list__item'><a href='"+t.url+"' class='result-plan-list__image-link'><img src='"+t.img+"' alt='plan-image' class='result-plan-list__image'><div class='result-plan-info'><div class='result-plan-info__price'><p class='result-plan-info__text'>"+t.price+" грн</p><p class='result-plan-info__text'>"+t.all_room+"м<sup>2</sup> – "+t.price_m2+" грн/м<sup>2</sup></p><div class='color-box result-plan__color-box color-box_dark-gray'></div></div><div class='result-plan-info__floor'><p class='result-plan-info__text'>"+t.floor+" этаж</p><p class='result-plan-info__text'>№ "+t.number+"</p></div></div><span class='rooms__link result-plan__rooms'>"+t.rooms+"K</span><span class='button result-plan__button border-gradient'>Подробнее</span></a></li>"}}$(".result-plan-list__item").remove();var o=getFlats(t);return $(".result-plan-list").append(function(t){var o="";return t.forEach(function(t,a){o+=e(t)}),o}(o))}function flatsShowTable(t,e){function o(t){switch(t){case"1":return"<div class='color-box color-box_green filter-table__color-box'></div>";case"2":return"<div class='color-box color-box_yellow filter-table__color-box'></div>";case"3":return"<div class='color-box color-box_gray filter-table__color-box'></div>";case"0":return"<div class='color-box color-box_dark-gray filter-table__color-box'></div>";default:return"<div class='color-box filter-table__color-box'></div>"}}var a=getFlats(t);return $(".filter-table__head").append(function(t){$(".filter-table__heading").remove();var e="";return t.forEach(function(t,o){e+="<th data-sort='"+t[1]+"' class='filter-table__heading'>"+t[0]+"</th>"}),e}(e)),sendSortingData(),$(".filter-table__body").append(function(t,e){function a(t){for(var e in t.properties)t[e]=t.properties[e].property_flat;l.push(t)}$(".filter-table__row").remove();var r={},l=[],s="";return function(t){t.forEach(function(t){r[t[1]]=t[0]})}(e),t.forEach(a),l.forEach(function(t,e){var a="<tr onclick='location.href=&apos;http://apivime.smarto.com.ua"+t.url+"&apos;' class='filter-table__row'><td class='filter-table__col'>"+t.floor+"</td><td class='filter-table__col'>"+o(t.sale)+"</td><td class='filter-table__col'>"+t.life_room+"</td>";for(var l in r)"floor"!==l&&"sale"!==l&&"life_room"!==l&&(a+="<td class='filter-table__col'>"+(void 0!=t[l]?t[l]:"Нет значения")+"</td>");a+="</tr>",s+=a}),s}(a,e))}function sendSortingData(){$(".filter-table__heading").on("click",function(){$(this).toggleClass("filter-sort_top");var t=$(this).data("sort");filter.order=tableHeadingCklickCount%2==0?[t,"asc"]:[t,"desc"],tableHeadingCklickCount++,$.ajax({url:"http://apivime.smarto.com.ua/ajax",type:"POST",dataType:"json",data:filter,success:function(t){flatsShowTable(t.dataList,t.dataTable)},error:function(t){console.log(t)}})})}function entranceShow(t){function e(t){function e(e,o){switch(e.sale){case"1":return"<li class='"+o+"'data-image='"+t.img+"'data-square='"+t.all_room+"'data-price_m='"+t.price_m2+"'data-price='"+t.price+"'data-rooms='"+t.rooms+"'data-num='"+t.number+"'><a href='"+t.url+"' class='entrance-flats__color-box color-box_green'>"+t.rooms+"</a></li>";case"2":return"<li class='"+o+"'data-image='"+t.img+"'data-square='"+t.all_room+"'data-price_m='"+t.price_m2+"'data-price='"+t.price+"'data-rooms='"+t.rooms+"'data-num='"+t.number+"'><a href='"+t.url+"' class='entrance-flats__color-box color-box_yellow'>"+t.rooms+"</a></li>";case"3":return"<li class='"+o+"'data-image='"+t.img+"'data-square='"+t.all_room+"'data-price_m='"+t.price_m2+"'data-price='"+t.price+"'data-rooms='"+t.rooms+"'data-num='"+t.number+"'><a href='"+t.url+"' class='entrance-flats__color-box color-box_gray'>"+t.rooms+"</a></li>";case"0":return"<li class='"+o+"'data-image='"+t.img+"'data-square='"+t.all_room+"'data-price_m='"+t.price_m2+"'data-price='"+t.price+"'data-rooms='"+t.rooms+"'data-num='"+t.number+"'><a href='"+t.url+"' class='entrance-flats__color-box color-box_dark-gray'>"+t.rooms+"</a></li>";default:return"<li class='"+o+" entrance-flats__item_not_available'data-image='"+t.img+"'data-square='"+t.all_room+"'data-price_m='"+t.price_m2+"'data-price='"+t.price+"'data-rooms='"+t.rooms+"'data-num='"+t.number+"'><div class='entrance-flats__color-box color-box_gray'></div></li>"}}return 1==t.filter?e(t,"entrance-flats__item"):e(t,"entrance-flats__item entrance-flats__item_active")}function o(t){var e,o="";for(var r in t)o+="<div class='entrance'><p class='entrance__num'>"+r+"</p><div class='entrance-flats-wrap'>"+a(t[r]).floorMarkup+"</div></div>",e=a(t[r]).maxFloor;return{finalMarkup:o,maxFloor:e}}function a(t){var e="",o=0;for(var a in t)o++,e+="<ul class='entrance-flats'>"+r(t[a])+"</ul>";return{floorMarkup:e,maxFloor:o}}function r(t){var o="";for(var a in t)o+=e(t[a]);return o}$(".entrance").remove();var l=t.data;$(".entrance-wrap").append(o(l).finalMarkup),function(t,e){$(".entrance-floor__item").remove();for(var o=+e[0];o<=+e[1];o++)$(".entrance-floor").append("<li class='entrance-floor__item'>"+o+"</li>")}(o(l).maxFloor,t.setka),tooltipShow(),showFlorPlan()}function getParametersFromUrl(){var t=decodeURIComponent(window.location.href),e=t.match(new RegExp("property_","g"));if(null!=e){for(var o=e.length/2||[],a=new URL(t),r={price:a.searchParams.getAll("option[price][]"),all_room:a.searchParams.getAll("option[all_room][]"),rooms:a.searchParams.getAll("option[rooms][]"),floor:a.searchParams.getAll("option[floor][]")},l=0;l<o;l++){var s="property_"+(l+1);s=s.toString(),r[s]=a.searchParams.getAll("option[properties]["+s+"][]")}for(var i=$(".range__item"),n=i.find(".js-filter__hidden-values"),c=0;c<n.length;c++){var f=$(n[c]).attr("name");for(var p in r)if(f==p){var u=$(n[c]).siblings(".js-filter__range").data("ionRangeSlider");u.update({from:r[p][0],to:r[p][1]}),$(n[c]).siblings(".js-filter__text_min").html(r[p][0]),$(n[c]).siblings(".js-filter__text_max").html(r[p][1])}}for(var _=r.rooms,g=$(".filter-short .filter-checkbox"),d=0;d<g.length;d++)_.forEach(function(t,e){+t==d+1&&$(g[d]).attr("checked","checked")})}}function request(){$.ajax({url:"http://apivime.smarto.com.ua/ajax",type:"POST",dataType:"json",data:filter,success:function(t){planDraw(t)},error:function(t){console.log(t)}})}function planDraw(t){var e=getCoord(t),o=getParam(t),a=t.img[0],r=t.img[1];t.img[name];$(".svg-wrap").css({width:a+"px",height:r+"px"}),function(l){function s(t,e,a){var r=c[a].mid[0],l=c[a].mid[1];switch(e[a].sale){case"1":return"<g class='floor-svg__grup'><a href='http://apivime.smarto.com.ua"+e[a].url+"'><polygon id='"+e[a].id+"' class='floor-svg__polygon' points='"+t+"'/><g><rect x='"+r+"' y='"+l+"' class='floor-svg__rect floor-svg__rect_green' width='20' height='20'/><text x='"+(r+7)+"' y='"+(l+14)+"' class='floor-svg__text floor-svg__text_white'>"+o[a].rooms+"</text></g><g><rect x='"+(r+20)+"' y='"+l+"' class='floor-svg__rect floor-svg__rect_green_lighter' width='65' height='20'/><text x='"+(r+26)+"' y='"+(l+14)+"' class='floor-svg__text floor-svg__text_black'>"+o[a].square+" м<tspan class='sup'>2</tspan></text></g></a></g>";case"2":return"<g class='floor-svg__grup'><a href='http://apivime.smarto.com.ua"+e[a].url+"'><polygon id='"+e[a].id+"' class='floor-svg__polygon' points='"+t+"'/><g><rect x='"+r+"' y='"+l+"' class='floor-svg__rect floor-svg__rect_yellow' width='20' height='20'/><text x='"+(r+7)+"' y='"+(l+14)+"' class='floor-svg__text floor-svg__text_white'>"+o[a].rooms+"</text></g><g><rect x='"+(r+20)+"' y='"+l+"' class='floor-svg__rect floor-svg__rect_yellow_lighter' width='65' height='20'/><text x='"+(r+26)+"' y='"+(l+14)+"' class='floor-svg__text floor-svg__text_black'>"+o[a].square+" м<tspan class='sup'>2</tspan></text></g></a></g>";case"3":return"<g class='floor-svg__grup'><a href='http://apivime.smarto.com.ua"+e[a].url+"'><polygon id='"+e[a].id+"' class='floor-svg__polygon' points='"+t+"'/><g><rect x='"+r+"' y='"+l+"' class='floor-svg__rect floor-svg__rect_gray' width='20' height='20'/><text x='"+(r+7)+"' y='"+(l+14)+"' class='floor-svg__text floor-svg__text_white'>"+o[a].rooms+"</text></g><g><rect x='"+(r+20)+"' y='"+l+"' class='floor-svg__rect floor-svg__rect_gray_lighter' width='65' height='20'/><text x='"+(r+26)+"' y='"+(l+14)+"' class='floor-svg__text floor-svg__text_black'>"+o[a].square+" м<tspan class='sup'>2</tspan></text></g></a></g>";case"0":return"<g class='floor-svg__grup'><a href='http://apivime.smarto.com.ua"+e[a].url+"'><polygon id='"+e[a].id+"' class='floor-svg__polygon' points='"+t+"'/><g><rect x='"+r+"' y='"+l+"' class='floor-svg__rect floor-svg__rect_dark-gray' width='20' height='20'/><text x='"+(r+7)+"' y='"+(l+14)+"' class='floor-svg__text floor-svg__text_white'>"+o[a].rooms+"</text></g><g><rect x='"+(r+20)+"' y='"+l+"' class='floor-svg__rect floor-svg__rect_dark-gray_lighter' width='65' height='20'/><text x='"+(r+26)+"' y='"+(l+14)+"' class='floor-svg__text floor-svg__text_black'>"+o[a].square+" м<tspan class='sup'>2</tspan></text></g></a></g>";default:return"<g class='floor-svg__grup'><a href='http://apivime.smarto.com.ua"+e[a].url+"'><polygon id='"+e[a].id+"' class='floor-svg__polygon' points='"+t+"'/><g><rect x='"+r+"' y='"+l+"' class='floor-svg__rect floor-svg__rect_dark-gray' width='20' height='20'/><text x='"+(r+7)+"' y='"+(l+14)+"' class='floor-svg__text floor-svg__text_white'>"+o[a].rooms+"</text></g><g><rect x='"+(r+20)+"' y='"+l+"' class='floor-svg__rect floor-svg__rect_dark-gray_lighter' width='65' height='20'/><text x='"+(r+26)+"' y='"+(l+14)+"' class='floor-svg__text'>"+o[a].square+" м<tspan class='sup'>2</tspan></text></g></a></g>"}}var i=$(".svg-wrap"),n="",c=getPolygonsCenter(e);$(".floor-svg")&&$(".floor-svg").remove(),e.forEach(function(t,e){n+=s(t,o,e)});var f="<svg class='floor-svg' width='"+a+"' height='"+r+"' version='1.0' xmlns='http://www.w3.org/2000/svg'><image xlink:href='"+t.img.name+"' x='0' y='0' height='100%' width='100%' />"+n+"</svg>";i.append(f),polygonHover(o),zooming()}()}function getCoord(t){var e=t.dataList,o=[];return e.forEach(function(t,e){null!=t.sorts&&o.push(t.sorts)}),o}function getParam(t){var e=t.dataList,o=[];return e.forEach(function(t,e){var a={};null!=t.sorts&&(a.rooms=t.rooms,a.square=t.all_room,a.sale=t.sale,a.id=t.id,a.totalPrice=t.price,a.meterPrice=t.price_m2,a.url=t.url,o.push(a))}),o}function getPolygonsCenter(t){var e=[];return t=t.map(function(t){return t.split(",")}),t.forEach(function(t){t=t.map(function(t){return t=+t}),e.push(t)}),function(t){var e=[];return t.forEach(function(t){for(var o={},a=[],r=[],l=0;l<t.length;l++)l%2==0?a.push(t[l]):r.push(t[l]);var s=[],i=Math.max.apply(Math,a),n=Math.max.apply(Math,r);s.push(i),s.push(n);var c=[],f=Math.min.apply(Math,a),p=Math.min.apply(Math,r);c.push(f),c.push(p);var u=[],_=i-(i-f)/2-10,g=n-(n-p)/2-10;u.push(_),u.push(g),o.min=c,o.max=s,o.mid=u,e.push(o)}),e}(t)}function polygonHover(t){function e(e){var o=$(e).attr("id"),a="";$(".flat-tooltip_big").remove(),t.forEach(function(t){var e=t.sale;if(o==t.id)switch(e){case"1":return a="<div class='flat-tooltip_big'><div class='flat-tooltip-num'><div class='flat-tooltip-num__rooms flat-tooltip-num__rooms_green'>"+t.rooms+"K</div><div class='flat-tooltip-num__num'>№"+t.id+"</div></div><div class='flat-tooltip-price'><p class='flat-tooltip-price__text'>"+t.totalPrice+" грн.</p><p class='flat-tooltip-price__text flat-tooltip-price__text_lower'>"+t.square+" м<sup>2</sup> – <span class='flat-tooltip-price__text_gray'>"+t.meterPrice+" грн/м<sup>2</sup></span></p></div></div>";case"2":return a="<div class='flat-tooltip_big'><div class='flat-tooltip-num'><div class='flat-tooltip-num__rooms flat-tooltip-num__rooms_yellow'>"+t.rooms+"K</div><div class='flat-tooltip-num__num'>№"+t.id+"</div></div><div class='flat-tooltip-price'><p class='flat-tooltip-price__text'>Бронь";case"0":return a="<div class='flat-tooltip_big'><div class='flat-tooltip-num'><div class='flat-tooltip-num__rooms flat-tooltip-num__rooms_dark-gray'>"+t.rooms+"K</div><div class='flat-tooltip-num__num'>№"+t.id+"</div></div><div class='flat-tooltip-price'><p class='flat-tooltip-price__text'>Продано</p><p class='flat-tooltip-price__text flat-tooltip-price__text_lower'>"+t.square+" м<sup>2</sup></p></div></div>";case"3":default:return a="<div class='flat-tooltip_big'><p>Помещение недоступно</p></div>"}}),$(".svg-wrap").append(a)}function o(e){var o=e.getBoundingClientRect().left,a=e.getBoundingClientRect().top,r=document.getElementsByClassName("plan-wrap")[0],l=r.getBoundingClientRect().left,s=r.getBoundingClientRect().top,i=a-s,n=o-l,c=$(".flat-tooltip_big"),f=c.height(),p=c.width();c.css({top:i-.3*f+"px",left:n+.3*p+"px",opacity:"1"}),c.hover(function(t){$(this).css({top:i-.3*f+"px",left:n+.3*p+"px",opacity:"1"})},function(){$(this).css({left:"-9999",opacity:"0"})}),$(e).siblings().css("display","none"),function(){var o=$(e).attr("id");t.forEach(function(t){var a=t.sale;if(o==t.id)switch(a){case"1":return $(e).css("fill","#219277");case"2":return $(e).css("fill","#FFB142");case"3":return $(e).css("fill","#666665");case"0":default:return $(e).css("fill","#454C53")}})}()}function a(t){$(t).siblings().css("display","block"),$(".flat-tooltip_big").css({opacity:"0",left:"-999px"}),$(t).css("fill","transparent")}$(".floor-svg__polygon").hover(function(t){var a=this;e(a),o(a)},function(t){a(this)})}function zooming(){var t=1;$(".zoom-button__button_plus").on("click",function(){t<1.8&&(t+=.2),$(".floor-svg").css("transform","scale("+t+")"),imageDrag(t)}),$(".zoom-button__button_minus").on("click",function(){t>1&&(t-=.2),$(".floor-svg").css("transform","scale("+t+")"),imageDrag(t)}),function(){document.getElementsByClassName("plan-wrap")[0].addEventListener("wheel",function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var o=e.deltaY||e.detail||e.wheelDelta;o<0?t<2&&(t+=-o/3e3):o>1&&t>1&&(t+=-o/3e3),$(".floor-svg").css("transform","translate(0, 0) scale("+t+")"),imageDrag(t)})}(),imageDrag(1)}function imageDrag(t){var e=document.getElementsByClassName("floor-svg")[0],o=document.getElementsByClassName("plan-wrap")[0],a=document.getElementsByClassName("floor-wrap")[0];a.onmousedown=function(a){var r=o.getBoundingClientRect(),l=e.getBoundingClientRect(),s=a.clientX-r.left,i=a.clientY-r.top,n=l.top-r.top-i,c=l.left-r.left-s;$(e).css("transform","translate(0, 0) scale("+t+")"),$(o).mousemove(function(o){var a=o.clientX-r.left,l=o.clientY-r.top,s=a+c,i=l+n;$(".floor-container").css({cursor:"-webkit-grab",cursor:"-moz-grab",cursor:"grab"}),t<1.5?$(e).css({left:s+10*t+"px",top:i+10*t+"px"}):$(e).css({left:s+100*t+"px",top:i+100*t+"px"})})},a.ondragstart=function(){return!1},a.onmouseup=function(){$(o).off("mousemove"),$(".floor-container").css({cursor:"default"})}}$(".filter-top__button_more").on("click",function(){$(this).toggleClass("filter-top__button_more_active"),$(this).find(".filter-top__button-icon").toggleClass("filter-top__button-icon_active"),$(".filter-full").slideToggle(),$(".filter-settings").slideUp()}),$(".filter-full__button_more").on("click",function(){$(this).toggleClass("filter-full__button_more_active"),$(this).find(".filter-full__button-icon").toggleClass("filter-full__button-icon_active"),$(".filter-settings").slideToggle()}),document.querySelectorAll(".color-box").forEach(function(t){var e=t.getAttribute("data-color");"green"==e?$(t).addClass("color-box_green"):"yellow"==e?$(t).addClass("color-box_yellow"):"gray"==e?$(t).addClass("color-box_gray"):"dark-gray"==e&&$(t).addClass("color-box_dark-gray")}),showFlorPlan(),$(".result-short__select").on("click",function(){$(this).siblings(".view-list").slideToggle()}),$(".view-list__item").on("click",function(){var t=$(this).find(".view-list__text").html(),e="#"+$(this).find(".view-list__icon").attr("id"),o=$(this).closest(".result-short__select-wrap").find(".result-short__select-icon"),a=$(this).closest(".result-short__select-wrap").find(".result-short__select"),r=$(".filter-section-js"),l=$(this).index();a.html(t),o.find("use").attr("xlink:href",e),$(this).closest(".view-list").css("display","none"),r.css("display","none"),$(r[l]).fadeIn(),r.removeClass("filter-section_active-js"),$(r[l]).addClass("filter-section_active-js"),1!=l?$(".filter-select").css("display","block"):$(".filter-select").css("display","none"),showFilterPagination(),changeFilterFloorNum(l)}),tooltipShow(),$(".result-tile-wrap").addClass("filter-section_active-js");var filterDefautl={count:"12",typ:"3",page:"1",order:[],option:{price:getDefaulValue($("input[name='price']")),all_room:getDefaulValue($("input[name='all_room']")),rooms:[],floor:getDefaulValue($("input[name='floor']")),house:$(".building").data("house"),project_id:$(".building").data("id"),properties:{}}};!function(){var t=$(".filter-settings").find(".filter-checkbox");$(".filter-full-range").find(".range__item").remove(),t.each(function(t,e){var o=$(e).prop("checked"),a=$(e).data("label"),r=a.split(" ").join(""),l=$(e).attr("id"),s=$(e).data("min"),i=$(e).data("max");rangeMarkup(r,a,s,i);o&&$(".filter-full-range").append(rangeMarkup(r,l,a,s,i)),addNewOptionToFilter(filterDefautl,l),rangesValue()})}(),$(".filter-settings-list__label").on("click",function(){var t=$(this).siblings(".filter-checkbox"),e=t.prop("checked"),o=t.data("label"),a=o.split(" ").join(""),r=t.attr("id"),l=t.data("min"),s=t.data("max");e?($("#"+a).remove(),filter.option.properties[r][0]=null,filter.option.properties[r][1]=null):($(".filter-full-range").append(rangeMarkup(a,r,o,l,s)),addNewOptionToFilter(filter,r),rangesValue())}),$(".clear-select-js").on("click",function(){$(".filter-full-range").find(".range__item").remove(),filter.option.properties={}});var filter=objClone(filterDefautl);!function(){for(var t=filter.option.rooms,e=$(".filter-short-checkbox-wrap").find(".filter-checkbox"),o=0;o<e.length;o++)$(e[o]).prop("checked")&&t.push($(e[o]).attr("value"))}(),rangesValue(),getRoomsNumber(),$(".filter__button-js").on("click",function(t){t.preventDefault(),$(".residence-list__item").remove();var e=$.param(filter),o=window.location.href+"?";o=o.substr(0,o.indexOf("?")),window.history.pushState("","",o+"?"+e),getParametersFromUrl(),$.ajax({url:"http://apivime.smarto.com.ua/ajax",type:"POST",dataType:"json",data:filter,success:function(t){entranceShow(t),flatsShow(t.dataList),flatsShowTable(t.dataList,t.dataTable),showFilterPagination(),paginationItemShow(t.quantity,12,flatsShow,flatsShowTable),$(".result-short_all-js").html(t.quantity),$(".result-short_free-js").html(t.quantityFree),noResult(t.dataList)},error:function(t){console.log(t)}})}),function(){$(".select__item").on("click",function(t){var e=$(this).closest(".home-filter__select-wrap"),o=e.find(".result-list-top__select").val();filter.count=o,$.ajax({url:"http://apivime.smarto.com.ua/ajax",type:"POST",dataType:"json",data:filter,success:function(t){flatsShow(t.dataList),flatsShowTable(t.dataList,t.dataTable),paginationItemShow(t.quantity,o,flatsShow,flatsShowTable)},error:function(t){console.log(t)}})})}();var tableHeadingCklickCount=1;sendSortingData();var URLSearchParams=URLSearchParams||function(){"use strict";function t(t){var r,s,i,n,c,f,u=Object.create(null);if(this[p]=u,t)if("string"==typeof t)for("?"===t.charAt(0)&&(t=t.slice(1)),n=t.split("&"),c=0,f=n.length;c<f;c++)i=n[c],r=i.indexOf("="),-1<r?o(u,a(i.slice(0,r)),a(i.slice(r+1))):i.length&&o(u,a(i),"");else if(l(t))for(c=0,f=t.length;c<f;c++)i=t[c],o(u,i[0],i[1]);else if(t.forEach)t.forEach(e,u);else for(s in t)o(u,s,t[s])}function e(t,e){o(this,e,t)}function o(t,e,o){var a=l(o)?o.join(","):o;e in t?t[e].push(a):t[e]=[a]}function a(t){return decodeURIComponent(t.replace(n," "))}function r(t){return encodeURIComponent(t).replace(i,f)}var l=Array.isArray,s=t.prototype,i=/[!'\(\)~]|%20|%00/g,n=/\+/g,c={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},f=function(t){return c[t]},p="__URLSearchParams__:"+Math.random();s.append=function(t,e){o(this[p],t,e)},s.delete=function(t){delete this[p][t]},s.get=function(t){var e=this[p];return t in e?e[t][0]:null},s.getAll=function(t){var e=this[p];return t in e?e[t].slice(0):[]},s.has=function(t){return t in this[p]},s.set=function(t,e){this[p][t]=[""+e]},s.forEach=function(t,e){var o=this[p];Object.getOwnPropertyNames(o).forEach(function(a){o[a].forEach(function(o){t.call(e,o,a,this)},this)},this)},s.toJSON=function(){return{}},s.toString=function(){var t,e,o,a,l=this[p],s=[];for(e in l)for(o=r(e),t=0,a=l[e];t<a.length;t++)s.push(o+"="+r(a[t]));return s.join("&")};var u=Object.defineProperty,_=Object.getOwnPropertyDescriptor,g=function(t){function e(e,o){s.append.call(this,e,o),e=this.toString(),t.set.call(this._usp,e?"?"+e:"")}function o(e){s.delete.call(this,e),e=this.toString(),t.set.call(this._usp,e?"?"+e:"")}function a(e,o){s.set.call(this,e,o),e=this.toString(),t.set.call(this._usp,e?"?"+e:"")}return function(t,r){return t.append=e,t.delete=o,t.set=a,u(t,"_usp",{configurable:!0,writable:!0,value:r})}},d=function(t){return function(e,o){return u(e,"_searchParams",{configurable:!0,writable:!0,value:t(o,e)}),o}},m=function(e){var o=e.append;e.append=s.append,t.call(e,e._usp.search.slice(1)),e.append=o},h=function(t,e){if(!(t instanceof e))throw new TypeError("'searchParams' accessed on an object that does not implement interface "+e.name)},v=function(e){var o,a=e.prototype,r=_(a,"searchParams"),l=_(a,"href"),s=_(a,"search");!r&&s&&s.set&&(o=d(g(s)),Object.defineProperties(a,{href:{get:function(){return l.get.call(this)},set:function(t){var e=this._searchParams;l.set.call(this,t),e&&m(e)}},search:{get:function(){return s.get.call(this)},set:function(t){var e=this._searchParams;s.set.call(this,t),e&&m(e)}},searchParams:{get:function(){return h(this,e),this._searchParams||o(this,new t(this.search.slice(1)))},set:function(t){h(this,e),o(this,t)}}}))};return v(HTMLAnchorElement),/^function|object$/.test(typeof URL)&&URL.prototype&&v(URL),t}();!function(t){var e=function(){try{return!!Symbol.iterator}catch(t){return!1}}();"forEach"in t||(t.forEach=function(t,e){var o=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach(function(a){!a.length||a in o||(o[a]=this.getAll(a)).forEach(function(o){t.call(e,o,a,this)},this)},this)}),"keys"in t||(t.keys=function(){var t=[];this.forEach(function(e,o){t.push(o)});var o={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e&&(o[Symbol.iterator]=function(){return o}),o}),"values"in t||(t.values=function(){var t=[];this.forEach(function(e){t.push(e)});var o={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e&&(o[Symbol.iterator]=function(){return o}),o}),"entries"in t||(t.entries=function(){var t=[];this.forEach(function(e,o){t.push([o,e])});var o={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e&&(o[Symbol.iterator]=function(){return o}),o}),!e||Symbol.iterator in t||(t[Symbol.iterator]=t.entries),"sort"in t||(t.sort=function(){for(var t,e,o,a=this.entries(),r=a.next(),l=r.done,s=[],i=Object.create(null);!l;)o=r.value,e=o[0],s.push(e),e in i||(i[e]=[]),i[e].push(o[1]),r=a.next(),l=r.done;for(s.sort(),t=0;t<s.length;t++)this.delete(s[t]);for(t=0;t<s.length;t++)e=s[t],this.append(e,i[e].shift())})}(URLSearchParams.prototype),getParametersFromUrl(),$(".plan-data-js").on("click",function(){var t=$(".filter-top-range").find(".range__item")[2],e=$(t).find(".js-filter__text_min").html();filter.typ=4,filter.option.floor=e,request(),changeFilterFloorNum(1),$(t).css("display","none")}),$(".floor-nav-list__item").on("click",function(t){var e=$(this).html(),o=$(this);o.siblings().removeClass("floor-nav-list__item_active"),o.addClass("floor-nav-list__item_active"),filter.option.floor=e,$(".floor-svg").remove(),filter.typ="4",request(),changeFilterFloorNum(1)});