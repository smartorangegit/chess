function showAllProjectOnMap(e){initMap(createObjWithNecessaryProperties(e.data))}function showFilteredProjectOnMap(e){$(".filter__button-js").on("click",function(r){function o(e){var r=[];a.forEach(function(o,t){for(var n in e){var a=e[n][0],i=e[n][1];"rooms"!=n&&(+o[n]>=a!=0&&+o[n]<=i!=0||r.push(t))}}),r=function(e){for(var r={},o=0;o<e.length;o++){r[e[o]]=!0}return Object.keys(r)}(r);for(var o=r.length-1;o>=0;o--)a.splice(r[o],1);return a}function t(e){var r=o(e),t=e.rooms,n=[];return 0!=t.length?(r.forEach(function(e,r){t.forEach(function(r){e.rooms==r&&n.push(e)})}),n):r}r.preventDefault();var n=e.data,a=createObjWithNecessaryProperties(n);filter.option;initMap(function(e){var r=t(e.option),o=e.selectValue,n=[];return r.forEach(function(e,r){for(var t in o)""!=o[t]&&o[t]==e[t]&&n.push(e)}),0!=n.length?n:r}(filter))})}function createObjWithNecessaryProperties(e){var r=[],o=["all_room","projects_coor","price","rooms","project_price","project_city","project_region","types","development_id"];for(var t in e){var n=e[t],a={};o.forEach(function(e){for(var r in n)r==e&&(a[e]=n[r])}),r.push(a)}return r}function initMap(e){var r=document.getElementById("map");if(r){var o=new google.maps.Map(r,{zoom:11,center:{lat:50.465477,lng:30.513899},gestureHandling:"greedy"}),t={url:"img/map-marker.png",origin:new google.maps.Point(0,0)},n=[];e.forEach(function(e){var r={};r.lat=+e.projects_coor[0],r.lng=+e.projects_coor[1],n.push(r)});for(var a=0;a<n.length;a++){new google.maps.Marker({position:{lat:n[a].lat,lng:n[a].lng},map:o,icon:t})}}}var filterDefautl={option:{price:getDefaulValue($("input[name='price']")),all_room:getDefaulValue($("input[name='all_room']")),project_price:getDefaulValue($("input[name='project_price']")),rooms:[]},selectValue:{project_city:"",project_region:"",state:"",development_id:""}},filter=objClone(filterDefautl);rangesValue(),getSelectsValue(),getRoomsNumber(),$.ajax({url:"http://apivime.smarto.com.ua/ajax",type:"POST",dataType:"json",data:{typ:"1",page:"1"},success:function(e){showAllProjectOnMap(e),showFilteredProjectOnMap(e)},error:function(e){console.log(e)}});