function initMap(e){var o=getAllProject(e),r=document.getElementById("map");if(r){var t=new google.maps.Map(r,{zoom:12,center:{lat:50.465477,lng:30.513899},gestureHandling:"greedy"}),n={url:"img/map-marker-blue.png",scaledSize:new google.maps.Size(20,30),origin:new google.maps.Point(0,0)},a=filterProj(e,t,n);void 0==a&&markersShow(t,o,n)}}function getAllProject(e){return createObjWithNecessaryProperties(e.data)}function filterProj(e,o,r){$(".filter__button-js").on("click",function(t){function n(e){var o=[];c.forEach(function(r,t){for(var n in e){var a=e[n][0],i=e[n][1];"rooms"!=n&&(+r[n]>=a!=0&&+r[n]<=i!=0||o.push(t))}}),o=function(e){for(var o={},r=0;r<e.length;r++){o[e[r]]=!0}return Object.keys(o)}(o);for(var r=o.length-1;r>=0;r--)c.splice(o[r],1);return c}function a(e){var o=n(e),r=e.rooms,t=[];return 0!=r.length?(o.forEach(function(e,o){r.forEach(function(o){e.rooms==o&&t.push(e)})}),t):o}t.preventDefault();var i=e.data,c=createObjWithNecessaryProperties(i),l=(filter.option,function(e){var o=a(e.option),r=e.selectValue,t=[];return o.forEach(function(e,o){for(var n in r)""!=r[n]&&r[n]==e[n]&&t.push(e)}),0!=t.length?t:o}(filter)),p=getAllProject(e);return showResultOnMap(o,p,l,r),l})}function createObjWithNecessaryProperties(e){var o=[],r=["project_site","project_name_mini","all_room","projects_coor","price","rooms","project_price","project_city","project_region","types","development_id"];for(var t in e){var n=e[t],a={};r.forEach(function(e){for(var o in n)o==e&&(a[e]=n[o])}),o.push(a)}return console.log(o),o}function markersShow(e,o,r){var t=[];o.forEach(function(e){var o={};o.lat=+e.projects_coor[0],o.lng=+e.projects_coor[1],o.name=e.project_name_mini,o.site=e.project_site,t.push(o)}),t.forEach(function(o){var t=new google.maps.Marker({position:{lat:o.lat,lng:o.lng},url:o.site,title:o.name,map:e,icon:r});google.maps.event.addListener(t,"click",function(){window.location.href=t.url})})}function showResultOnMap(e,o,r,t){markersShow(e,o,{url:"img/map-marker.png",scaledSize:new google.maps.Size(20,30),origin:new google.maps.Point(0,0)}),markersShow(e,r,t)}var filterDefautl={option:{price:getDefaulValue($("input[name='price']")),all_room:getDefaulValue($("input[name='all_room']")),project_price:getDefaulValue($("input[name='project_price']")),rooms:[]},selectValue:{project_city:"",project_region:"",state:"",development_id:""}},filter=objClone(filterDefautl);rangesValue(),getSelectsValue(),getRoomsNumber(),$.ajax({url:"http://apivime.smarto.com.ua/ajax",type:"POST",dataType:"json",data:{typ:"1",page:"1"},success:function(e){initMap(e)},error:function(e){console.log(e)}});